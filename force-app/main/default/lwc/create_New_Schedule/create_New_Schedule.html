<template>
    <lightning-record-edit-form object-api-name="buildertek__Schedule__c" record-id={recordId} onsubmit={handleOnSubmit}
        onsuccess={handleOnSuccess} onerror={handleOnError}>

        <header class="slds-modal__header">
            <lightning-button-icon icon-name="utility:close" onclick={closeModel} alternative-text="close"
                variant="bare-inverse" class="slds-modal__close"></lightning-button-icon>
            <p></p>
            <h3 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">New Schedule</h3>
            <p></p>
        </header>

        <h3 class="slds-section-title--divider" style="font-weight: bold">Information</h3>
        <div>
            <lightning-layout multiple-rows="true">
                <template for:each={listOfFields} for:item="field">
                    <lightning-layout-item key={field.name} size="12" medium-device-size="6" padding="around-small">
                        <div>
                            <lightning-input-field field-name={field.name} value={parentRecordId}>
                            </lightning-input-field>
                            <lightning-input-field field-name={field.name} value={ProjectManagerId}>
                            </lightning-input-field>
                            <lightning-input-field field-name={field.name}></lightning-input-field>
                        </div>
                    </lightning-layout-item>
                </template>
            </lightning-layout>
            <div style="height: 12.2rem; overflow-y: scroll">
                <div>
                    <h3 class="slds-section-title--divider" style="font-weight: bold">Master Schedules</h3>
                </div>
                <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                    <thead>
                        <tr class="slds-text-title_caps">
                            <th scope="col" class="slds-truncate"></th>
                            <th scope="col">
                                <div class="slds-truncate" title="Duration">Name</div>
                            </th>
                            <th scope="col">
                                <div class="slds-truncate" title="Project Description">Description</div>
                            </th>
                            <th scope="col">
                                <div class="slds-truncate" title="Project Description">Total Working Days</div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <template for:each={masterId} for:item="item" for:index="index">
                            <tr key={item.Id}>
                                <td>
                                    <span data-id={item.Id} onchange={saveSelectedPO}>
                                        <lightning-radio-group name="select" label=""
                                            value={item.selectedPurchaseOrder}></lightning-radio-group>
                                    </span>
                                </td>
                                <td class="slds-truncate">
                                    <a href='#'>{item.Name}</a>
                                </td>
                                <td>{item.buildertek__Description__c}</td>
                                <td>{item.buildertek__Total_Duration__c}</td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>
            <div>
                <div>
                    <h3 class="slds-section-title--divider" style="font-weight: bold">Master Schedules</h3>
                </div>
                <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                    <thead>
                        <tr class="slds-text-title_caps">
                            <th scope="col" class="slds-truncate"></th>
                            <th scope="col">
                                <div class="slds-truncate" title="Duration">Name</div>
                            </th>
                            <th scope="col">
                                <div class="slds-truncate" title="Project Description">Description</div>
                            </th>
                            <th scope="col">
                                <div class="slds-truncate" title="Project Description">Total Working Days
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <template for:each={masterId} for:item="item" for:index="index">
                            <tr key={item.Id}>
                                <td>
                                    <span data-id={item.Id} onchange={saveSelectedPO}>
                                        <lightning-radio-group name="select" label=""
                                            value={item.selectedPurchaseOrder}></lightning-radio-group>
                                    </span>
                                </td>
                                <td class="slds-truncate">
                                    <a href='#'>{item.Name}</a>
                                </td>
                                <td>{item.buildertek__Description__c}</td>
                                <td>{item.buildertek__Total_Duration__c}</td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="modal-footer slds-modal__footer slds-size_1-of-1">
            <lightning-button variant="neutral" title="Cancel" label="Cancel" onclick={closeModel}></lightning-button>
            <lightning-button variant="neutral" type="submit" title="Save & New" label="Save & New"
                onclick={onSaveandNew}></lightning-button>
            <lightning-button variant="brand" type="submit" name="save" label="Save" aura:id="saveSchedule">
            </lightning-button>
        </div>
    </lightning-record-edit-form>
</template>